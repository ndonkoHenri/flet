
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Build multi-platform Python apps powered by Flutter.">
      
      
        <meta name="author" content="Flet">
      
      
        <link rel="canonical" href="https://docs.flet.dev/tutorials/solitaire/">
      
      
        <link rel="prev" href="../chat/">
      
      
        <link rel="next" href="../todo/">
      
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Solitaire Tutorial - flet</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M17%2013h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_pyodide.css">
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: none; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-with-flet" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="flet" class="md-header__button md-logo" aria-label="flet" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            flet
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Solitaire Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="pink"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/flet-dev/flet" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    flet-dev/flet
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cookbook/accessibility/" class="md-tabs__link">
          
  
  
    
  
  Cookbook

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/controls/" class="md-tabs__link">
          
  
  
    
  
  API Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../calculator/" class="md-tabs__link">
          
  
  
    
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="flet" class="md-nav__button md-logo" aria-label="flet" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    flet
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/flet-dev/flet" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    flet-dev/flet
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/create-flet-app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating a new Flet app
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/running-app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running a Flet app (Hot Reload)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/testing-on-android/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing on Android
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/testing-on-ios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing on iOS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/navigation-and-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Navigation and Routing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/flet-controls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flet Controls
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/custom-controls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Controls
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/adaptive-apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adaptive apps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/async-apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Async apps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cookbook
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Cookbook
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/accessibility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accessibility
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/animations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Animations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/assets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/client-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/control-refs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Refs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/drag-and-drop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Drag and Drop
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/encrypting-sensitive-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Encrypting sensitive data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/file-picker.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File picker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/fonts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fonts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/keyboard-shortcuts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Keyboard Shortcuts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/large-lists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Large Lists
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/pubsub.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PubSub
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/read-and-write-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Read and Write Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/session-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Session Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/theming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theming
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api/controls/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Controls
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Controls
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_2" >
        
          
          <label class="md-nav__link" for="__nav_3_1_2" id="__nav_3_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Animations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            Animations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/controls/animations/animatedswitcher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AnimatedSwitcher
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_3" >
        
          
          <label class="md-nav__link" for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Dialogs, Alerts and Panels
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_3">
            <span class="md-nav__icon md-icon"></span>
            Dialogs, Alerts and Panels
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/controls/dialogs/alertdialog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AlertDialog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/controls/dialogs/cupertinoactionsheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CupertinoActionSheet
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_4" >
        
          
          <label class="md-nav__link" for="__nav_3_1_4" id="__nav_3_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Navigation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_4">
            <span class="md-nav__icon md-icon"></span>
            Navigation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/controls/navigation/appbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AppBar
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_5" >
        
          
          <label class="md-nav__link" for="__nav_3_1_5" id="__nav_3_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Buttons
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_5">
            <span class="md-nav__icon md-icon"></span>
            Buttons
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/controls/buttons/cupertinoactionsheetaction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CupertinoActionSheetAction
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calculator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calculator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Solitaire
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Solitaire
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started-with-flet" class="md-nav__link">
    <span class="md-ellipsis">
      Getting started with Flet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof-of-concept-app-for-draggable-cards" class="md-nav__link">
    <span class="md-ellipsis">
      Proof of concept app for draggable cards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Proof of concept app for draggable cards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-drag-the-card-around" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Drag the card around
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-drop-the-card-in-the-slot-or-bounce-it-back" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Drop the card in the slot or bounce it back
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-adding-a-second-card" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Adding a second card
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-adding-more-slots" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Adding more slots
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fanned-card-piles" class="md-nav__link">
    <span class="md-ellipsis">
      Fanned card piles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fanned card piles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slot-card-and-solitaire-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Slot, Card and Solitaire classes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#placing-card-with-offset" class="md-nav__link">
    <span class="md-ellipsis">
      Placing card with offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drag-pile-of-cards" class="md-nav__link">
    <span class="md-ellipsis">
      Drag pile of cards
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solitaire-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Solitaire setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solitaire setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-card-deck" class="md-nav__link">
    <span class="md-ellipsis">
      Create card deck
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-slots" class="md-nav__link">
    <span class="md-ellipsis">
      Create slots
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deal-cards" class="md-nav__link">
    <span class="md-ellipsis">
      Deal cards
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reveal-top-cards-in-tableau-piles" class="md-nav__link">
    <span class="md-ellipsis">
      Reveal top cards in tableau piles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solitaire-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Solitaire rules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solitaire rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-rules" class="md-nav__link">
    <span class="md-ellipsis">
      General rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foundations-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Foundations rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableau-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Tableau rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stock-and-waste" class="md-nav__link">
    <span class="md-ellipsis">
      Stock and waste
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#winning-the-game" class="md-nav__link">
    <span class="md-ellipsis">
      Winning the game
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-the-app" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying the app
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../todo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ToDo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../trolli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trolli
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2022/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2022
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/how-to/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    how-to
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/news/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    news
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/product/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    product
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started-with-flet" class="md-nav__link">
    <span class="md-ellipsis">
      Getting started with Flet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#proof-of-concept-app-for-draggable-cards" class="md-nav__link">
    <span class="md-ellipsis">
      Proof of concept app for draggable cards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Proof of concept app for draggable cards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-drag-the-card-around" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Drag the card around
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-drop-the-card-in-the-slot-or-bounce-it-back" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Drop the card in the slot or bounce it back
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-adding-a-second-card" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Adding a second card
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-adding-more-slots" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Adding more slots
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fanned-card-piles" class="md-nav__link">
    <span class="md-ellipsis">
      Fanned card piles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fanned card piles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slot-card-and-solitaire-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Slot, Card and Solitaire classes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#placing-card-with-offset" class="md-nav__link">
    <span class="md-ellipsis">
      Placing card with offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drag-pile-of-cards" class="md-nav__link">
    <span class="md-ellipsis">
      Drag pile of cards
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solitaire-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Solitaire setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solitaire setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-card-deck" class="md-nav__link">
    <span class="md-ellipsis">
      Create card deck
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-slots" class="md-nav__link">
    <span class="md-ellipsis">
      Create slots
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deal-cards" class="md-nav__link">
    <span class="md-ellipsis">
      Deal cards
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reveal-top-cards-in-tableau-piles" class="md-nav__link">
    <span class="md-ellipsis">
      Reveal top cards in tableau piles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solitaire-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Solitaire rules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Solitaire rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-rules" class="md-nav__link">
    <span class="md-ellipsis">
      General rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foundations-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Foundations rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableau-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Tableau rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stock-and-waste" class="md-nav__link">
    <span class="md-ellipsis">
      Stock and waste
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#winning-the-game" class="md-nav__link">
    <span class="md-ellipsis">
      Winning the game
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-the-app" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying the app
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/flet-dev/flet/edit/main/docs/tutorials/solitaire.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/flet-dev/flet/raw/main/docs/tutorials/solitaire.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>Solitaire</h1>

<p>In this tutorial we will show you step-by-step creation of a famous Klondike solitaire game in Python with Flet. For an inspiration, we looked at this online game: <a href="https://www.solitr.com/">https://www.solitr.com/</a></p>
<p>This tutorial is aimed at beginner/intermediate level Python developers who have basic knowledge of Python and object oriented programming.</p>
<p>You can find a live demo <a href="https://gallery.flet.dev/solitaire/">here</a>.</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/part1-final.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="solitaire" src="../../assets/tutorials/solitaire/part1-final.gif" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>We have broken down the game implementation into the following steps:</p>
<ul>
<li><a href="#getting-started-with-flet">Getting started with Flet</a></li>
<li><a href="#proof-of-concept-app-for-draggable-cards">Proof of concept app for draggable cards</a></li>
<li><a href="#fanned-card-piles">Fanned card piles</a></li>
<li><a href="#solitaire-setup">Solitaire setup</a></li>
<li><a href="#solitaire-rules">Solitaire rules</a></li>
<li><a href="#winning-the-game">Winning the game</a></li>
<li><a href="#deploying-the-app">Deploying the app</a></li>
</ul>
<p>In the Part 2 (will be covered in the next tutorial) we'll be adding Appbar with options to start new game, view game rules and change game settings.</p>
<h2 id="getting-started-with-flet">Getting started with Flet<a class="headerlink" href="#getting-started-with-flet" title="Permanent link">#</a></h2>
<p>To create a multi-platform app in Python with Flet, you don't need to know HTML, CSS or JavaScript, but you do need a basic knowledge of Python and object-oriented programming.</p>
<p>Before you can create your first Flet app, you need to <a href="/docs/getting-started/">setup your development environment</a>, which requires Python 3.9 or above and <code>flet</code> package.</p>
<p>Once you have Flet installed, let's <a href="/docs/getting-started/create-flet-app">create</a> a simple hello-world app.</p>
<p>Create <code>hello.py</code> with the following contents:</p>
<div class="language-python highlight"><span class="filename">hello.py</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">flet</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ft</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">page</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">Page</span><span class="p">):</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Hello, world!&quot;</span><span class="p">))</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">ft</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">)</span>
</span></code></pre></div>
<p>Run this app and you will see a new window with a greeting:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/todo/hello-world.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="hello-world" src="../../assets/tutorials/todo/hello-world.png" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<h2 id="proof-of-concept-app-for-draggable-cards">Proof of concept app for draggable cards<a class="headerlink" href="#proof-of-concept-app-for-draggable-cards" title="Permanent link">#</a></h2>
<p>For the proof of concept, we will only be using three types of controls:</p>
<ul>
<li><a href="/docs/controls/stack"><code>Stack</code></a> - will be used as a parent control for absolute positioning of slots and cards</li>
<li><a href="/docs/controls/gesturedetector"><code>GestureDetector</code></a> - the card that will be moved within the <code>Stack</code></li>
<li><a href="/docs/controls/container"><code>Container</code></a> - the slot where the card will be dropped. Will also be used as <code>content</code> for the <code>GestureDetector</code>.</li>
</ul>
<p>We have broken down the proof of concept app into four easy steps, so that after each step you have 
a complete short program to run and test.</p>
<h3 id="step-1-drag-the-card-around">Step 1: Drag the card around<a class="headerlink" href="#step-1-drag-the-card-around" title="Permanent link">#</a></h3>
<p>In this step we will create a <code>Stack</code> (Solitaire game field) and a <code>GestureDetector</code> (Solitaire card). 
The card will then be added to the list of the <code>Stack.controls</code>. <code>top</code> and <code>left</code> properties of the 
<code>GestureDetector</code> are used for absolute positioning of the card in the <code>Stack</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">flet</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ft</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">page</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">Page</span><span class="p">):</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>   <span class="n">card</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">GestureDetector</span><span class="p">(</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>       <span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>       <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>       <span class="n">content</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>   <span class="p">)</span>   
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>   <span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">Stack</span><span class="p">(</span><span class="n">controls</span><span class="o">=</span><span class="p">[</span><span class="n">card</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">))</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="n">ft</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">)</span>
</span></code></pre></div>
<p>Run the app to see the card added to the stack:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/drag-and-drop1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="drag_and_drop1" src="../../assets/tutorials/solitaire/drag-and-drop1.png" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>To be able to move the card, we'll create a <code>drag</code> method that will be called in <code>on_pan_update</code> 
event of <code>GestureDetector</code> which happens every <code>drag_interval</code> while the user drags the card with their mouse.</p>
<p>To show the card's movement, well be updating the cards <code>top</code> and <code>left</code> properties in the <code>drag</code> 
method each time the <code>on_pan_update</code> event happens.</p>
<p>Below is the simplest code for dragging <code>GestureDetector</code> in <code>Stack</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">flet</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ft</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1"># Use of GestureDetector with on_pan_update event for dragging card</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># Absolute positioning of controls within stack</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">page</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">Page</span><span class="p">):</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">drag</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragUpdateEvent</span><span class="p">):</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>       <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="n">delta_y</span><span class="p">)</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>       <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">left</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="n">delta_x</span><span class="p">)</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>       <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>   <span class="n">card</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">GestureDetector</span><span class="p">(</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>       <span class="n">mouse_cursor</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">MouseCursor</span><span class="o">.</span><span class="n">MOVE</span><span class="p">,</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>       <span class="n">drag_interval</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>       <span class="n">on_pan_update</span><span class="o">=</span><span class="n">drag</span><span class="p">,</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>       <span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>       <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>       <span class="n">content</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>   <span class="p">)</span>   
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>   <span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">Stack</span><span class="p">(</span><span class="n">controls</span><span class="o">=</span><span class="p">[</span><span class="n">card</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">))</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="n">ft</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">)</span>
</span></code></pre></div>
<p>Now you can see the card moving:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/drag-and-drop2.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="drag_and_drop2" src="../../assets/tutorials/solitaire/drag-and-drop2.gif" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<div class="admonition">
<p class="admonition-title">Note</p>
<p>After any properties of a control are updated, an <code>update()</code> method of the control (or its parent control) should be called for the update to take effect.</p>
</div>
<h3 id="step-2-drop-the-card-in-the-slot-or-bounce-it-back">Step 2: Drop the card in the slot or bounce it back<a class="headerlink" href="#step-2-drop-the-card-in-the-slot-or-bounce-it-back" title="Permanent link">#</a></h3>
<p>The goal of this step is to be able to drop a card into a slot if it is close enough and bounce it back if its not.
<a class="glightbox" href="/img/docs/solitaire-tutorial/drag-and-drop3.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="/img/docs/solitaire-tutorial/drag-and-drop3.gif" className="screenshot-50" /></a></p>
<p>Lets create a <code>Container</code> control that will represent a slot to which well be dropping the card:
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">slot</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>    <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">border</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    <span class="p">)</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">Stack</span><span class="p">(</span><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="n">slot</span><span class="p">,</span> <span class="n">card</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">))</span>
</span></code></pre></div></p>
<p><code>on_pan_end</code> event of the card is called when the card is dropped: 
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">card</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">GestureDetector</span><span class="p">(</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    <span class="n">mouse_cursor</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">MouseCursor</span><span class="o">.</span><span class="n">MOVE</span><span class="p">,</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="n">drag_interval</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="n">on_pan_update</span><span class="o">=</span><span class="n">drag</span><span class="p">,</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="n">on_pan_end</span><span class="o">=</span><span class="n">drop</span><span class="p">,</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    <span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>    <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    <span class="n">content</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Colors</span><span class="o">.</span><span class="n">GREEN</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="p">)</span>
</span></code></pre></div></p>
<p>On this event, well call <code>drop</code> method to check if the card is close enough to the slot (lets say its closer than 20px to the slot), and <code>place</code> it there:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">drop</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragEndEvent</span><span class="p">):</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>        <span class="nb">abs</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>        <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="p">):</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>        <span class="n">place</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="k">def</span><span class="w"> </span><span class="nf">place</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;place card to the slot&quot;&quot;&quot;</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>    <span class="n">card</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>    <span class="n">card</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>    <span class="n">page</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div>
<p>Now, if the card is not close enough, we need to bounce it back to its original position. Unfortunately, we dont know the original position coordinates, since the cards <code>top</code> and <code>left</code> properties were changed on <code>on_pan_update</code> event.</p>
<p>To solve this problem, lets create a <code>Solitaire</code> class object to keep track of the original position of the card when <code>on_pan_start</code> event of the card is called:
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Solitaire</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>   <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">start_top</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">start_left</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="n">solitaire</span> <span class="o">=</span> <span class="n">Solitaire</span><span class="p">()</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="k">def</span><span class="w"> </span><span class="nf">start_drag</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragStartEvent</span><span class="p">):</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    <span class="n">solitaire</span><span class="o">.</span><span class="n">start_top</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">top</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>    <span class="n">solitaire</span><span class="o">.</span><span class="n">start_left</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">left</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>    <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Now lets update <code>on_pan_end</code> event with the option to bounce card back:
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">bounce_back</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="n">card</span><span class="p">):</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;return card to its original position&quot;&quot;&quot;</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="n">card</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">game</span><span class="o">.</span><span class="n">start_top</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="n">card</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">game</span><span class="o">.</span><span class="n">start_left</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="n">page</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="k">def</span><span class="w"> </span><span class="nf">drop</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragEndEvent</span><span class="p">):</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>        <span class="nb">abs</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>        <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    <span class="p">):</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>        <span class="n">place</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>        <span class="n">bounce_back</span><span class="p">(</span><span class="n">solitaire</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="p">)</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>    <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>The full code for this step can be found <a href="https://github.com/flet-dev/examples/blob/main/python/tutorials/solitaire/solitaire-drag-and-drop/step2.py">here</a>.</p>
<h3 id="step-3-adding-a-second-card">Step 3: Adding a second card<a class="headerlink" href="#step-3-adding-a-second-card" title="Permanent link">#</a></h3>
<p>Eventually, well need 52 cards to play the game. For our proof of concept, lets add a second card:
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>   <span class="n">card2</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">GestureDetector</span><span class="p">(</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>       <span class="n">mouse_cursor</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">MouseCursor</span><span class="o">.</span><span class="n">MOVE</span><span class="p">,</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>       <span class="n">drag_interval</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>       <span class="n">on_pan_start</span><span class="o">=</span><span class="n">start_drag</span><span class="p">,</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>       <span class="n">on_pan_update</span><span class="o">=</span><span class="n">drag</span><span class="p">,</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>       <span class="n">on_pan_end</span><span class="o">=</span><span class="n">drop</span><span class="p">,</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>       <span class="n">left</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>       <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>       <span class="n">content</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Colors</span><span class="o">.</span><span class="n">YELLOW</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">),</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>   <span class="p">)</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>   <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="n">slot</span><span class="p">,</span> <span class="n">card1</span><span class="p">,</span> <span class="n">card2</span><span class="p">]</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>   <span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">Stack</span><span class="p">(</span><span class="n">controls</span><span class="o">=</span><span class="n">controls</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">))</span>
</span></code></pre></div></p>
<p>Now, if you run the app with the two cards, you will notice that when you move the cards around, the 
yellow card (<code>card2</code>) is moving as expected but the green the card (<code>card1</code>) is moving under the yellow card. </p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/drag-and-drop4.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="drag_and_drop4.gif" src="../../assets/tutorials/solitaire/drag-and-drop4.gif" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>It happens because <code>card2</code> is added to the list of stack <code>controls</code> after <code>card1</code>. To fix this problem, 
we need to move the draggable card to the top of the list of controls on <code>on_pan_start</code> event:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">move_on_top</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">controls</span><span class="p">):</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Moves draggable card to the top of the stack&quot;&quot;&quot;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    <span class="n">controls</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>    <span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>    <span class="n">page</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="k">def</span><span class="w"> </span><span class="nf">start_drag</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragStartEvent</span><span class="p">):</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>    <span class="n">move_on_top</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="p">,</span> <span class="n">controls</span><span class="p">)</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>    <span class="n">solitaire</span><span class="o">.</span><span class="n">start_top</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">top</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>    <span class="n">solitaire</span><span class="o">.</span><span class="n">start_left</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">left</span>
</span></code></pre></div>
<p>Now the two cards can be dragged without issues:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/drag-and-drop5.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="drag_and_drop5.gif" src="../../assets/tutorials/solitaire/drag-and-drop5.gif" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>The full code for this step can be found <a href="https://github.com/flet-dev/examples/blob/main/python/tutorials/solitaire/solitaire-drag-and-drop/step3.py">here</a>.</p>
<h3 id="step-4-adding-more-slots">Step 4: Adding more slots<a class="headerlink" href="#step-4-adding-more-slots" title="Permanent link">#</a></h3>
<p>As a final step for the proof of concept app, lets create two more slots:
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">slot0</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">border</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="p">)</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="n">slot1</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">border</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="p">)</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="n">slot2</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>    <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">border</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="p">)</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="n">slots</span> <span class="o">=</span> <span class="p">[</span><span class="n">slot0</span><span class="p">,</span> <span class="n">slot1</span><span class="p">,</span> <span class="n">slot2</span><span class="p">]</span>
</span></code></pre></div></p>
<p>When creating new cards, we will not specify their <code>top</code> and <code>left</code> position now, but instead, 
will place them to the <code>slot0</code>:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># deal cards</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">place</span><span class="p">(</span><span class="n">card1</span><span class="p">,</span> <span class="n">slot0</span><span class="p">)</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">place</span><span class="p">(</span><span class="n">card2</span><span class="p">,</span> <span class="n">slot0</span><span class="p">)</span>
</span></code></pre></div>
<p><code>on_pan_end</code> event, where we check if a card is close to a slot, we will now go through the 
list of slots to find where the card should be dropped:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">drop</span><span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragEndEvent</span><span class="p">):</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">slots</span><span class="p">:</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>            <span class="nb">abs</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>        <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>        <span class="p">):</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>            <span class="n">place</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>            <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>            <span class="k">return</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>    <span class="n">bounce_back</span><span class="p">(</span><span class="n">solitaire</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="p">)</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    <span class="n">e</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div>
<p>As a result, the two cards can be dragged between the three slots:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/drag-and-drop6.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="drag_and_drop6.gif" src="../../assets/tutorials/solitaire/drag-and-drop6.gif" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>The full code for this step can be found <a href="https://github.com/flet-dev/examples/blob/main/python/tutorials/solitaire/solitaire-drag-and-drop/step4.py">here</a>.</p>
<p>Congratulations on completing the proof of concept app for the Solitaire game! 
Now you can work with <code>GestureDetector</code> to move cards inside <code>Stack</code> and place them to 
certain <code>Containers</code>, which is a great part of the game to begin with.</p>
<h2 id="fanned-card-piles">Fanned card piles<a class="headerlink" href="#fanned-card-piles" title="Permanent link">#</a></h2>
<p>In the proof of concept app you have accomplished the task of dropping a card into a slot in 
proximity or bounce it back. If there is already a card in that slot, the new card is placed on top of it, 
covering it completely.</p>
<p>In the actual Solitaire game, if there is already a card in a <em>tableau</em> slot, you want to 
place the draggable card a bit lower, so that you can see the previous card too, and if there are two cards, 
even lower. Those are called fanned piles.</p>
<p>Then, we want to be able to pick a card from the fanned pile that is not the top card of 
the pile and drag the card together with all the cards below it:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/fanned-piles3.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="fanned_piles1.gif" src="../../assets/tutorials/solitaire/fanned-piles3.gif" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>To be able to do that, it would be useful to have the information about the pile of cards 
in the slot from which the card is dragged, as well as in the slot to which it is being dropped. 
Lets restructure our program and get it ready for the implementation of the fanned piles.</p>
<h3 id="slot-card-and-solitaire-classes">Slot, Card and Solitaire classes<a class="headerlink" href="#slot-card-and-solitaire-classes" title="Permanent link">#</a></h3>
<p>A slot could have a <code>pile</code> property that would hold a list of cards that were placed there. 
Now the slot is a <code>Container</code> control object, and we cant add any new properties to it. 
Lets create a new <code>Slot</code> class that will inherit from <code>Container</code> and add a <code>pile</code> property to it:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">SLOT_WIDTH</span> <span class="o">=</span> <span class="mi">70</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">SLOT_HEIGHT</span> <span class="o">=</span> <span class="mi">100</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">flet</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ft</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">Slot</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">):</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>   <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">left</span><span class="p">):</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>       <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">pile</span><span class="o">=</span><span class="p">[]</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">=</span><span class="n">SLOT_WIDTH</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">=</span><span class="n">SLOT_HEIGHT</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">=</span><span class="n">left</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">=</span><span class="n">top</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">border</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">border</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></code></pre></div>
<p>Similarly to <code>Slot</code> class, lets create a new <code>Card</code> class with <code>slot</code> property to remember in which slot it resides. It will inherit from <code>GestureDetector</code> and well move all card-related methods to it:
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">CARD_WIDTH</span> <span class="o">=</span> <span class="mi">70</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">CARD_HEIGTH</span> <span class="o">=</span> <span class="mi">100</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="n">DROP_PROXIMITY</span> <span class="o">=</span> <span class="mi">20</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">flet</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ft</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="k">class</span><span class="w"> </span><span class="nc">Card</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">GestureDetector</span><span class="p">):</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>   <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solitaire</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>       <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">mouse_cursor</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">MouseCursor</span><span class="o">.</span><span class="n">MOVE</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">drag_interval</span><span class="o">=</span><span class="mi">5</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">on_pan_start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">start_drag</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">on_pan_update</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">drag</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">on_pan_end</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">drop</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">=</span><span class="kc">None</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">=</span><span class="kc">None</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span> <span class="o">=</span> <span class="n">solitaire</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">CARD_WIDTH</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">CARD_HEIGTH</span><span class="p">)</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">move_on_top</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="w">       </span><span class="sd">&quot;&quot;&quot;Moves draggable card to the top of the stack&quot;&quot;&quot;</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">bounce_back</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-29"><a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="w">       </span><span class="sd">&quot;&quot;&quot;Returns card to its original position&quot;&quot;&quot;</span>
</span><span id="__span-14-30"><a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">top</span>
</span><span id="__span-14-31"><a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">left</span>
</span><span id="__span-14-32"><a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-14-33"><a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a>
</span><span id="__span-14-34"><a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-14-35"><a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="w">       </span><span class="sd">&quot;&quot;&quot;Place card to the slot&quot;&quot;&quot;</span>
</span><span id="__span-14-36"><a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span>
</span><span id="__span-14-37"><a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span>
</span><span id="__span-14-38"><a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a>
</span><span id="__span-14-39"><a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">start_drag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragStartEvent</span><span class="p">):</span>
</span><span id="__span-14-40"><a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">move_on_top</span><span class="p">()</span>
</span><span id="__span-14-41"><a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-14-42"><a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a>
</span><span id="__span-14-43"><a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">drag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragUpdateEvent</span><span class="p">):</span>
</span><span id="__span-14-44"><a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="n">delta_y</span><span class="p">)</span>
</span><span id="__span-14-45"><a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="n">delta_x</span><span class="p">)</span>
</span><span id="__span-14-46"><a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-14-47"><a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a>
</span><span id="__span-14-48"><a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragEndEvent</span><span class="p">):</span>
</span><span id="__span-14-49"><a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a>       <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">slots</span><span class="p">:</span>
</span><span id="__span-14-50"><a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a>           <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-14-51"><a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a>               <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-14-52"><a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a>           <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-14-53"><a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a>         <span class="p">):</span>
</span><span id="__span-14-54"><a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a>               <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-14-55"><a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a>               <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-14-56"><a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a>               <span class="k">return</span>
</span><span id="__span-14-57"><a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a>
</span><span id="__span-14-58"><a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">bounce_back</span><span class="p">()</span>
</span><span id="__span-14-59"><a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<div class="admonition">
<p class="admonition-title">Note</p>
<p>Since each card has <code>slot</code> property now, there is no need to remember <code>start_left</code> and <code>start_top</code> 
position of the draggable card in Solitaire class anymore, because we can just bounce it back to its slot.</p>
</div>
<p>Lets update <code>Solitaire</code> class to inherit from <code>Stack</code>, and move the creation of cards and slots there:
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">SOLITAIRE_WIDTH</span> <span class="o">=</span> <span class="mi">1000</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">SOLITAIRE_HEIGHT</span> <span class="o">=</span> <span class="mi">500</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">flet</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ft</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">slot</span><span class="w"> </span><span class="kn">import</span> <span class="n">Slot</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">card</span><span class="w"> </span><span class="kn">import</span> <span class="n">Card</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">Solitaire</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">Stack</span><span class="p">):</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>   <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>       <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">slots</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">SOLITAIRE_WIDTH</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">SOLITAIRE_HEIGHT</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">did_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">create_card_deck</span><span class="p">()</span>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">create_slots</span><span class="p">()</span>
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">deal_cards</span><span class="p">()</span>
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">create_card_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>       <span class="n">card1</span> <span class="o">=</span> <span class="n">Card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;GREEN&quot;</span><span class="p">)</span>
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>       <span class="n">card2</span> <span class="o">=</span> <span class="n">Card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;YELLOW&quot;</span><span class="p">)</span>
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="o">=</span> <span class="p">[</span><span class="n">card1</span><span class="p">,</span> <span class="n">card2</span><span class="p">]</span>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">create_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-15-28"><a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Slot</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span><span id="__span-15-29"><a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Slot</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">200</span><span class="p">))</span>
</span><span id="__span-15-30"><a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Slot</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
</span><span id="__span-15-31"><a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">)</span>
</span><span id="__span-15-32"><a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-15-33"><a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a>
</span><span id="__span-15-34"><a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">deal_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-15-35"><a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="__span-15-36"><a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>       <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">:</span>
</span><span id="__span-15-37"><a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a>           <span class="n">card</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-15-38"><a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<div class="admonition">
<p class="admonition-title">Note</p>
<p>If you try to call <code>create_slots()</code> and <code>create_card_deck()</code> and <code>deal_cards()</code> methods  <code>__init__()</code> 
method of the Solitaire class, it will cause an error Control must be added to the page first. 
To fix this, we  create slots and cards inside the <code>did_mount()</code> method, which happens immediately 
after the stack is added to the page.</p>
</div>
<p>Our main program will be very simple now:
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">flet</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ft</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">solitaire</span><span class="w"> </span><span class="kn">import</span> <span class="n">Solitaire</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">page</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">Page</span><span class="p">):</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>   <span class="n">solitaire</span> <span class="o">=</span> <span class="n">Solitaire</span><span class="p">()</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>   <span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">solitaire</span><span class="p">)</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="n">ft</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">)</span>
</span></code></pre></div></p>
<p>You can find the full source code for this step <a href="https://github.com/flet-dev/examples/tree/main/python/tutorials/solitaire/solitaire-classes">here</a>. It works exactly the same way as 
the proof of concept app, but re-written with the new classes to be ready for adding more 
complex functionality to it. </p>
<h3 id="placing-card-with-offset">Placing card with offset<a class="headerlink" href="#placing-card-with-offset" title="Permanent link">#</a></h3>
<p>When the card is being placed to a slot in the <code>card.place()</code> method, we need to do three things:
* Remove the card from its original slot, if it exists
* Change cards slot to the new slot
* Add the card to the new slots pile
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>    <span class="c1"># remove card from it&#39;s original slot, if exists</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>    <span class="c1"># change card&#39;s slot to a new slot</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="o">=</span> <span class="n">slot</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>    <span class="c1"># add card to the new slot&#39;s pile</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>    <span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></code></pre></div></p>
<p>When updating cards <code>top</code> and <code>left</code> position, <code>left</code> should remain the same, but <code>top</code> 
will depend on the length of the new slots pile:
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span>
</span></code></pre></div></p>
<p>Now the cards are placed with offset which gives us the fanned pile look:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/fanned-piles1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="fanned_piles1" src="../../assets/tutorials/solitaire/fanned-piles1.png" /></a></p>
<figcaption></figcaption>
</figure>
<h3 id="drag-pile-of-cards">Drag pile of cards<a class="headerlink" href="#drag-pile-of-cards" title="Permanent link">#</a></h3>
<p>If you try to drag the card from the bottom of the pile now, it will look like this:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/fanned-piles2.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="drag_pile" src="../../assets/tutorials/solitaire/fanned-piles2.gif" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>To fix this problem, we need to update all the methods that work with the draggable 
card to work with the draggable pile instead.</p>
<p>Lets create <code>get_draggable_pile()</code> method that will get the list of cards that need to be dragged 
together, starting with the card you picked:
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_draggable_pile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;returns list of cards that will be dragged together, starting with the current card&quot;&quot;&quot;</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:]</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># slot == None when the cards are dealt and need to be place in slot for the first time</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
</span></code></pre></div></p>
<p>Then, well update <code>move_on_top()</code> method:
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">move_on_top</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Brings draggable card pile to the top of the stack&quot;&quot;&quot;</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>        <span class="c1"># for card in self.get_draggable_pile():</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="p">:</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Additionally, we need to update <code>drag()</code> method to go through the draggable pile and update 
positions of all the cards being dragged: 
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">drag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragUpdateEvent</span><span class="p">):</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="p">:</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>            <span class="n">card</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>                <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="n">delta_y</span><span class="p">)</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>            <span class="p">)</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>            <span class="n">card</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="n">delta_x</span><span class="p">)</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Also, we need to update <code>place()</code> method to place place the draggable pile to the slot:
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Place draggable pile to the slot&quot;&quot;&quot;</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="p">:</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>            <span class="n">card</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>            <span class="n">card</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>            <span class="c1"># remove card from it&#39;s original slot, if it exists</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>            <span class="k">if</span> <span class="n">card</span><span class="o">.</span><span class="n">slot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>                <span class="n">card</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>            <span class="c1"># change card&#39;s slot to a new slot</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>            <span class="n">card</span><span class="o">.</span><span class="n">slot</span> <span class="o">=</span> <span class="n">slot</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>            <span class="c1"># add card to the new slot&#39;s pile</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>            <span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Finally, if no slot in proximity is found, we need to bounce the whole pile back to its original position:
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">bounce_back</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns draggable pile to its original position&quot;&quot;&quot;</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="p">:</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>            <span class="n">card</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">card</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="n">card</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>            <span class="n">card</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">card</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">left</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>The full source code of this step can be found <a href="https://github.com/flet-dev/examples/tree/main/python/tutorials/solitaire/solitaire-fanned-piles">here</a>. Now we can drag and drop cards in fanned piles, 
which means we are ready for the real deal! </p>
<h2 id="solitaire-setup">Solitaire setup<a class="headerlink" href="#solitaire-setup" title="Permanent link">#</a></h2>
<p>Lets take a look at the <a href="https://en.wikipedia.org/wiki/Klondike_(solitaire)#Rules">wikipedia article about Klondike (solitaire)</a>:</p>
<blockquote>
<p>Klondike is played with a standard 52-card deck.</p>
<p>After shuffling, a tableau of seven fanned piles of cards is laid from left to right. 
From left to right, each pile contains one more card than the last. 
The first and left-most pile contains a single upturned card, the second pile contains two cards, 
the third pile contains three cards, the fourth pile contains four cards, 
the fifth pile contains five cards, the sixth pile contains six cards, and the seventh pile contains seven cards. 
The topmost card of each pile is turned face up.
The remaining cards form the stock and are placed facedown at the upper left of the layout.</p>
<p>The four foundations (light rectangles in the upper right of the figure) are built up by suit from Ace (low in this game) to King, and the tableau piles can be built down by alternate colors.</p>
</blockquote>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/game-setup-wiki.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="game_setup_wiki" src="../../assets/tutorials/solitaire/game-setup-wiki.png" width="60%" /></a></p>
<figcaption></figcaption>
</figure>
<p>We will now work on this setup step by step.</p>
<h3 id="create-card-deck">Create card deck<a class="headerlink" href="#create-card-deck" title="Permanent link">#</a></h3>
<p>The first step is to create a full deck of cards in Solitaire class. Each card should have a <code>suit</code> property (hearts, diamonds, clubs and spades) and a <code>rank</code> property (from Ace to King). 
For the suit, its <code>color</code> is important, because tableau piles are built by alternate colors.</p>
<p>For the rank, its <code>value</code> is important, because foundations are built from the lowest (Ace) to the highest (King) rank value.</p>
<p>In solitaire.py, create <code>Suite</code> and <code>Rank</code> classes:
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Suite</span><span class="p">:</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">suite_name</span><span class="p">,</span> <span class="n">suite_color</span><span class="p">):</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">suite_name</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">suite_color</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">Rank</span><span class="p">:</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card_name</span><span class="p">,</span> <span class="n">card_value</span><span class="p">):</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">card_name</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">card_value</span>
</span></code></pre></div>
Now, in the <code>Card</code> class, instead of accepting the color as an argument, well be accepting <code>suite</code> and <code>rank</code> in <code>__init__()</code>. Additionally, well add <code>face_up</code> property to the card and the Container will now has image of the back of the card as its <code>content</code>:
<div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Card</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">GestureDetector</span><span class="p">):</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solitaire</span><span class="p">,</span> <span class="n">suite</span><span class="p">,</span> <span class="n">rank</span><span class="p">):</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_cursor</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">MouseCursor</span><span class="o">.</span><span class="n">MOVE</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">drag_interval</span><span class="o">=</span><span class="mi">5</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_pan_start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">start_drag</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_pan_update</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">drag</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_pan_end</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">drop</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">suite</span><span class="o">=</span><span class="n">suite</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rank</span><span class="o">=</span><span class="n">rank</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span><span class="o">=</span><span class="kc">False</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">=</span><span class="kc">None</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">=</span><span class="kc">None</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span> <span class="o">=</span> <span class="n">solitaire</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>            <span class="n">width</span><span class="o">=</span><span class="n">CARD_WIDTH</span><span class="p">,</span>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>            <span class="n">height</span><span class="o">=</span><span class="n">CARD_HEIGTH</span><span class="p">,</span>
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>            <span class="n">border_radius</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">border_radius</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>            <span class="n">content</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s2">&quot;card_back.png&quot;</span><span class="p">))</span>
</span></code></pre></div>
All the images for the face up cards, as well as card back are stored in the images folder in the same directory as main.py. </p>
<p>::note
For the reference to the image file to work, we need to specify the folder were it resides in the assets_dir in main.py:
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="n">ft</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">,</span> <span class="n">assets_dir</span><span class="o">=</span><span class="s2">&quot;images&quot;</span><span class="p">)</span>
</span></code></pre></div>
::</p>
<p>Finally, in <code>solitaire.create_card_deck()</code> we'll create lists of suites and ranks and then the 52-card deck:
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">create_card_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>    <span class="n">suites</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>        <span class="n">Suite</span><span class="p">(</span><span class="s2">&quot;hearts&quot;</span><span class="p">,</span> <span class="s2">&quot;RED&quot;</span><span class="p">),</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>        <span class="n">Suite</span><span class="p">(</span><span class="s2">&quot;diamonds&quot;</span><span class="p">,</span> <span class="s2">&quot;RED&quot;</span><span class="p">),</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>        <span class="n">Suite</span><span class="p">(</span><span class="s2">&quot;clubs&quot;</span><span class="p">,</span> <span class="s2">&quot;BLACK&quot;</span><span class="p">),</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>        <span class="n">Suite</span><span class="p">(</span><span class="s2">&quot;spades&quot;</span><span class="p">,</span> <span class="s2">&quot;BLACK&quot;</span><span class="p">),</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>    <span class="p">]</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>    <span class="n">ranks</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;Ace&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;6&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;7&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;8&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;9&quot;</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;Jack&quot;</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;Queen&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>        <span class="n">Rank</span><span class="p">(</span><span class="s2">&quot;King&quot;</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a>    <span class="p">]</span>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">cards</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>    <span class="k">for</span> <span class="n">suite</span> <span class="ow">in</span> <span class="n">suites</span><span class="p">:</span>
</span><span id="__span-27-27"><a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a>        <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="n">ranks</span><span class="p">:</span>
</span><span id="__span-27-28"><a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Card</span><span class="p">(</span><span class="n">solitaire</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">suite</span><span class="o">=</span><span class="n">suite</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="n">rank</span><span class="p">))</span>
</span></code></pre></div>
The card deck is ready to be dealt, and now we need to create the layout for it.</p>
<h3 id="create-slots">Create slots<a class="headerlink" href="#create-slots" title="Permanent link">#</a></h3>
<p>Klondike solitaire game layout should look like this:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/solitaire-layout.svg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="solitaire-layout" src="../../assets/tutorials/solitaire/solitaire-layout.svg" width="60%" /></a></p>
<figcaption></figcaption>
</figure>
<p>Lets create all those slots in <code>solitaire.create_slots()</code>:
<div class="language-python highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">create_slots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">stock</span> <span class="o">=</span> <span class="n">Slot</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">border</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">waste</span> <span class="o">=</span> <span class="n">Slot</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">foundations</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>    <span class="n">x</span> <span class="o">=</span> <span class="mi">300</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">foundations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Slot</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">border</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;outline&quot;</span><span class="p">)))</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>        <span class="n">x</span> <span class="o">+=</span> <span class="mi">100</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">tableau</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tableau</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Slot</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>        <span class="n">x</span> <span class="o">+=</span> <span class="mi">100</span>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stock</span><span class="p">)</span>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">waste</span><span class="p">)</span>
</span><span id="__span-28-20"><a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">foundations</span><span class="p">)</span>
</span><span id="__span-28-21"><a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableau</span><span class="p">)</span>
</span><span id="__span-28-22"><a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<div class="admonition">
<p class="admonition-title">Note</p>
<p>Note: some slots should have visible border and some shouldnt, so we added border to the list of arguments for the creation of <code>Slot</code> objects.</p>
</div>
<h3 id="deal-cards">Deal cards<a class="headerlink" href="#deal-cards" title="Permanent link">#</a></h3>
<p>Let's start with shuffling the cards and adding them to the list of controls:
<div class="language-python highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">deal_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>    <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Then we'll deal the cards to the tableau piles from left to right so that each pile contains one more card than the last, and place the remaining cards to the stock pile:
<div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">deal_cards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>    <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cards</span><span class="p">)</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>    <span class="c1"># deal to tableau</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>    <span class="n">first_slot</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>    <span class="n">remaining_cards</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cards</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>    <span class="k">while</span> <span class="n">first_slot</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableau</span><span class="p">):</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableau</span><span class="p">[</span><span class="n">first_slot</span><span class="p">:]:</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>            <span class="n">top_card</span> <span class="o">=</span> <span class="n">remaining_cards</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>            <span class="n">top_card</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>            <span class="n">remaining_cards</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">top_card</span><span class="p">)</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>        <span class="n">first_slot</span> <span class="o">+=</span><span class="mi">1</span>
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>    <span class="c1"># place remaining cards to stock pile</span>
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>    <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">remaining_cards</span><span class="p">:</span>
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>        <span class="n">card</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stock</span><span class="p">)</span>
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Lets run the program and see where we are at now:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/game-setup1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="game-setup1" src="../../assets/tutorials/solitaire/game-setup1.png" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>Cards in stock were placed in a fanned pile in the same manner as to the tableau, 
but they should have been placed to a regular pile instead. To fix this problem, 
lets add this condition to the <code>card.place()</code> method:
<div class="language-python highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Place draggable pile to the slot&quot;&quot;&quot;</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>    <span class="k">if</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">card_offset</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span>
</span></code></pre></div>
Now cards are only placed in fanned piles to tableau:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/game-setup2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="game-setup2" src="../../assets/tutorials/solitaire/game-setup2.png" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>If you try moving the cards around now, the program wont work. 
The reason for this is that in the <code>card.drop()</code> method iterates through list of slots which we dont have now. </p>
<p>Lets update the method to go separately through foundations and tableau:
<div class="language-python highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragEndEvent</span><span class="p">):</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>    <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>            <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>        <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a>        <span class="p">):</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>            <span class="k">return</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>    <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">foundations</span><span class="p">:</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>            <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>        <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>        <span class="p">):</span>
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-32-17"><a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-32-18"><a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a>            <span class="k">return</span>
</span><span id="__span-32-19"><a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a>
</span><span id="__span-32-20"><a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">bounce_back</span><span class="p">()</span>
</span></code></pre></div></p>
<h3 id="reveal-top-cards-in-tableau-piles">Reveal top cards in tableau piles<a class="headerlink" href="#reveal-top-cards-in-tableau-piles" title="Permanent link">#</a></h3>
<p>Now we have the correct game setup and as a last touch we need to reveal the topmost cards in tableau piles.</p>
<p>In <code>Slot</code> class, create a <code>get_top_card()</code> method:
<div class="language-python highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_top_card</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pile</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></code></pre></div>
In <code>Card</code> class, create <code>turn_dace_up()</code> method:
<div class="language-python highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">turn_face_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">src</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/images/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">rank</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">suite</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.svg&quot;</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div>
Finally, reveal the topmost cards in the <code>solitaire.deal_cards()</code>:
<div class="language-python highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>    <span class="n">slot</span><span class="o">.</span><span class="n">get_top_card</span><span class="p">()</span><span class="o">.</span><span class="n">turn_face_up</span><span class="p">()</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Lets see how it looks now:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/game-setup3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="game-setup3" src="../../assets/tutorials/solitaire/game-setup3.png" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>The full source code for this step can be found <a href="https://github.com/flet-dev/examples/tree/main/python/tutorials/solitaire/solitaire-game-setup">here</a>.</p>
<p>Congratulations on completing the Solitaire game setup! Youve created a full 52-card deck, built layout with stock, waste, foundations and tableau piles, dealt the cards and revealed the top cards in tableau. Lets move on to the next item on our todo list, which is Solitaire Rules.</p>
<h2 id="solitaire-rules">Solitaire rules<a class="headerlink" href="#solitaire-rules" title="Permanent link">#</a></h2>
<p>If you run your current version of Solitaire, youll notice that you can do some crazy things with your cards:
<a class="glightbox" href="/img/docs/solitaire-tutorial/game-rules1.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="/img/docs/solitaire-tutorial/game-rules1.gif" className="screenshot-50" /></a></p>
<p>Now it is time to implement some rules.</p>
<h3 id="general-rules">General rules<a class="headerlink" href="#general-rules" title="Permanent link">#</a></h3>
<p>Currently, we can move any card, but only face-up cards should be moved. 
Lets add this check in <code>start_drag</code>, <code>drag</code> and <code>drop</code> methods of the card:
<div class="language-python highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">start_drag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragStartEvent</span><span class="p">):</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span><span class="p">:</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">move_on_top</span><span class="p">()</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">drag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragUpdateEvent</span><span class="p">):</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span><span class="p">:</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="p">:</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>            <span class="n">card</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="n">delta_y</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>            <span class="n">card</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="n">delta_x</span><span class="p">)</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>            <span class="n">card</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a><span class="k">def</span><span class="w"> </span><span class="nf">drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragEndEvent</span><span class="p">):</span>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span><span class="p">:</span>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a>                <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-36-18"><a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>            <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-36-19"><a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a>        <span class="p">):</span>
</span><span id="__span-36-20"><a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-36-21"><a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a>                <span class="k">return</span>
</span><span id="__span-36-22"><a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a>
</span><span id="__span-36-23"><a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a>        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">foundations</span><span class="p">:</span>
</span><span id="__span-36-24"><a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-36-25"><a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a>                    <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-36-26"><a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a>            <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-36-27"><a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a>        <span class="p">):</span>
</span><span id="__span-36-28"><a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-36-29"><a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a>                <span class="k">return</span>
</span><span id="__span-36-30"><a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a>
</span><span id="__span-36-31"><a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">bounce_back</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Now lets specify <code>click</code> method for the <code>on_tap</code> event of the card to reveal the card 
if you click on a faced-down top card in a tableau pile:
<div class="language-python highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span> <span class="ow">and</span> <span class="bp">self</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">get_top_card</span><span class="p">():</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">turn_face_up</span><span class="p">()</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Let's check how it works:</p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/game-rules2.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="game_rules2" src="../../assets/tutorials/solitaire/game-rules2.gif" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<h3 id="foundations-rules">Foundations rules<a class="headerlink" href="#foundations-rules" title="Permanent link">#</a></h3>
<p>At the moment we can place fanned piles to foundations, which shouldnt be allowed. 
Lets check the draggable pile length to fix it:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragEndEvent</span><span class="p">):</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>    <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>            <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>        <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>        <span class="p">):</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>            <span class="k">return</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a>        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">foundations</span><span class="p">:</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a>                <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a>        <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a>        <span class="p">):</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-38-17"><a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a>                <span class="k">return</span>
</span><span id="__span-38-18"><a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a>
</span><span id="__span-38-19"><a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">bounce_back</span><span class="p">()</span>
</span></code></pre></div>
<p>Then, of course, not any card can be placed to a foundation. According to the rules, a foundation should start with an Ace and then the cards of the same suite can be placed on top of it to build a pile form Ace to King.</p>
<p>Lets add this rule to Solitaire class:
<div class="language-python highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">check_foundations_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>    <span class="n">top_card</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">get_top_card</span><span class="p">()</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>    <span class="k">if</span> <span class="n">top_card</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>            <span class="n">card</span><span class="o">.</span><span class="n">suite</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">top_card</span><span class="o">.</span><span class="n">suite</span><span class="o">.</span><span class="n">name</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a>            <span class="ow">and</span> <span class="n">card</span><span class="o">.</span><span class="n">rank</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">top_card</span><span class="o">.</span><span class="n">rank</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a>        <span class="p">)</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a>        <span class="k">return</span> <span class="n">card</span><span class="o">.</span><span class="n">rank</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Ace&quot;</span>
</span></code></pre></div></p>
<p>Well check this rule in <code>drop()</code> method before placing a card to a foundation slot:
<div class="language-python highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragEndEvent</span><span class="p">):</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span><span class="p">:</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>                <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>            <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>        <span class="p">):</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a>                <span class="k">return</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>            <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">foundations</span><span class="p">:</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a>                    <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a>            <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a>        <span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">check_foundations_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-40-18"><a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a>                    <span class="k">return</span>
</span><span id="__span-40-19"><a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a>
</span><span id="__span-40-20"><a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bounce_back</span><span class="p">()</span>
</span></code></pre></div></p>
<p>As a final touch for foundations rules, lets implement <code>doublclick</code> method for <code>on_double_tap</code> event of a card. 
It will be checking if the faced-up card fits into any of the foundations and place it there:
<div class="language-python highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">double</span><span class="o">-</span><span class="n">click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">get_draggable_pile</span><span class="p">()</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>       <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>           <span class="bp">self</span><span class="o">.</span><span class="n">move_on_top</span><span class="p">()</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>           <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">foundations</span><span class="p">:</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>               <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">check_foundations_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>                   <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>                   <span class="k">return</span>
</span></code></pre></div></p>
<h3 id="tableau-rules">Tableau rules<a class="headerlink" href="#tableau-rules" title="Permanent link">#</a></h3>
<p>Finally, let's implement the rules to build tableau piles down from King to Ace by alternating suite color.
Additionally, only King can be placed to an empty tableau slot.</p>
<p>Lets add these rules for Solitaire class:
<div class="language-python highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">check_tableau_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>    <span class="n">top_card</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">get_top_card</span><span class="p">()</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>    <span class="k">if</span> <span class="n">top_card</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>            <span class="n">card</span><span class="o">.</span><span class="n">suite</span><span class="o">.</span><span class="n">color</span> <span class="o">!=</span> <span class="n">top_card</span><span class="o">.</span><span class="n">suite</span><span class="o">.</span><span class="n">color</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>            <span class="ow">and</span> <span class="n">top_card</span><span class="o">.</span><span class="n">rank</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">card</span><span class="o">.</span><span class="n">rank</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>            <span class="ow">and</span> <span class="n">top_card</span><span class="o">.</span><span class="n">face_up</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>        <span class="p">)</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a>        <span class="k">return</span> <span class="n">card</span><span class="o">.</span><span class="n">rank</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;King&quot;</span>
</span></code></pre></div>
Similarly to the foundations rules, well check tableau rules before placing a card to a tableau pile:
<div class="language-python highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span> <span class="n">ft</span><span class="o">.</span><span class="n">DragEndEvent</span><span class="p">):</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span><span class="p">:</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>            <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>                <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>            <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>        <span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">check_tableau_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>                <span class="k">return</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>            <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">foundations</span><span class="p">:</span>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-43-14"><a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a>                    <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-43-15"><a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a>            <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">-</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">DROP_PROXIMITY</span>
</span><span id="__span-43-16"><a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a>        <span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">check_foundations_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-43-17"><a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
</span><span id="__span-43-18"><a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a>                    <span class="k">return</span>
</span><span id="__span-43-19"><a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a>
</span><span id="__span-43-20"><a id="__codelineno-43-20" name="__codelineno-43-20" href="#__codelineno-43-20"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">bounce_back</span><span class="p">()</span>
</span></code></pre></div></p>
<h3 id="stock-and-waste">Stock and waste<a class="headerlink" href="#stock-and-waste" title="Permanent link">#</a></h3>
<p>To properly play Solitaire game right now we are missing the remaining cards that are piled in the stock.</p>
<p>Lets update <code>click()</code> method of the card to go through the stock pile and place the cards to waste as we go:
<div class="language-python highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">face_up</span> <span class="ow">and</span> <span class="bp">self</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">get_top_card</span><span class="p">():</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">turn_face_up</span><span class="p">()</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">stock</span><span class="p">:</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">move_on_top</span><span class="p">()</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">waste</span><span class="p">)</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">turn_face_up</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Thats it! Now you can properly play solitaire, but it very difficult to win the game if 
you cannot pass though the waste again. Lets implement <code>click()</code> for <code>on_click</code> event of 
the stock Slot to go thought the stock pile again:
<div class="language-python highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Slot</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">Container</span><span class="p">):</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>   <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solitaire</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">border</span><span class="p">):</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>       <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">pile</span><span class="o">=</span><span class="p">[]</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">=</span><span class="n">SLOT_WIDTH</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">=</span><span class="n">SLOT_HEIGHT</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">=</span><span class="n">left</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="o">=</span><span class="n">top</span>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">on_click</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">click</span>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">=</span><span class="n">solitaire</span>
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">border</span><span class="o">=</span><span class="n">border</span>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>       <span class="bp">self</span><span class="o">.</span><span class="n">border_radius</span> <span class="o">=</span> <span class="n">ft</span><span class="o">.</span><span class="n">border_radius</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>
</span><span id="__span-45-14"><a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>   <span class="k">def</span><span class="w"> </span><span class="nf">click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
</span><span id="__span-45-15"><a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>       <span class="k">if</span> <span class="bp">self</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">stock</span><span class="p">:</span>
</span><span id="__span-45-16"><a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>           <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">restart_stock</span><span class="p">()</span>
</span></code></pre></div></p>
<p><code>restart_stock()</code> method in <code>Solitaire</code> class will place all cards from waste to stock again:
<div class="language-python highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">restart_stock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">waste</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">waste</span><span class="o">.</span><span class="n">get_top_card</span><span class="p">()</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>        <span class="n">card</span><span class="o">.</span><span class="n">turn_face_down</span><span class="p">()</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>        <span class="n">card</span><span class="o">.</span><span class="n">move_on_top</span><span class="p">()</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>        <span class="n">card</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stock</span><span class="p">)</span>   
</span></code></pre></div></p>
<p>For <code>card.place()</code> method to work properly with cards from Stock and Waste, weve added a 
condition to <code>card.get_draggable_pile()</code>, so that it returns the top card only and not the whole pile:
<div class="language-python highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_draggable_pile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;returns list of cards that will be dragged together, starting with the current card&quot;&quot;&quot;</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">stock</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">waste</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>        <span class="p">):</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:]</span>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># slot == None when the cards are dealt and need to be place in slot for the first time</span>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">draggable_pile</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span>
</span></code></pre></div>
All done! The full source code for this step can be found <a href="https://github.com/flet-dev/examples/tree/main/python/tutorials/solitaire/solitaire-game-rules">here</a>.</p>
<p>Lets move on to the last step of the game itself - detecting the situation when you have won.</p>
<h2 id="winning-the-game">Winning the game<a class="headerlink" href="#winning-the-game" title="Permanent link">#</a></h2>
<p>According to <a href="https://en.wikipedia.org/wiki/Klondike_(solitaire)#Probability_of_winning">wikipedia</a>, some suggest the chances of winning the game as being 1 in 30 games. </p>
<p>Knowing that the chances of winning are quite low, we should plan on showing the user something exciting when that finally happens.</p>
<p>First, lets add a check for the winning condition to <code>Solitaire</code> class. If all four foundations contain total of 52 cards, then you have won:
<div class="language-python highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">check_win</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>    <span class="n">cards_num</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>    <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">foundations</span><span class="p">:</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>        <span class="n">cards_num</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>    <span class="k">if</span> <span class="n">cards_num</span> <span class="o">==</span> <span class="mi">52</span><span class="p">:</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>    <span class="k">return</span> <span class="kc">False</span>
</span></code></pre></div></p>
<p>Well be checking if this condition is true each time a card is placed to a foundation:
<div class="language-python highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">):</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Place draggable pile to the slot&quot;&quot;&quot;</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>    <span class="n">draggable_pile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_draggable_pile</span><span class="p">()</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>    <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">draggable_pile</span><span class="p">:</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>        <span class="k">if</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">tableau</span><span class="p">:</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a>            <span class="n">card</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">)</span> <span class="o">*</span> <span class="n">CARD_OFFSET</span>
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a>            <span class="n">card</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">top</span>
</span><span id="__span-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a>        <span class="n">card</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">slot</span><span class="o">.</span><span class="n">left</span>
</span><span id="__span-49-12"><a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a>
</span><span id="__span-49-13"><a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a>        <span class="c1"># remove card from it&#39;s original slot, if exists</span>
</span><span id="__span-49-14"><a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a>        <span class="k">if</span> <span class="n">card</span><span class="o">.</span><span class="n">slot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-49-15"><a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a>            <span class="n">card</span><span class="o">.</span><span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="__span-49-16"><a id="__codelineno-49-16" name="__codelineno-49-16" href="#__codelineno-49-16"></a>
</span><span id="__span-49-17"><a id="__codelineno-49-17" name="__codelineno-49-17" href="#__codelineno-49-17"></a>        <span class="c1"># change card&#39;s slot to a new slot</span>
</span><span id="__span-49-18"><a id="__codelineno-49-18" name="__codelineno-49-18" href="#__codelineno-49-18"></a>        <span class="n">card</span><span class="o">.</span><span class="n">slot</span> <span class="o">=</span> <span class="n">slot</span>
</span><span id="__span-49-19"><a id="__codelineno-49-19" name="__codelineno-49-19" href="#__codelineno-49-19"></a>
</span><span id="__span-49-20"><a id="__codelineno-49-20" name="__codelineno-49-20" href="#__codelineno-49-20"></a>        <span class="c1"># add card to the new slot&#39;s pile</span>
</span><span id="__span-49-21"><a id="__codelineno-49-21" name="__codelineno-49-21" href="#__codelineno-49-21"></a>        <span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
</span><span id="__span-49-22"><a id="__codelineno-49-22" name="__codelineno-49-22" href="#__codelineno-49-22"></a>
</span><span id="__span-49-23"><a id="__codelineno-49-23" name="__codelineno-49-23" href="#__codelineno-49-23"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">check_win</span><span class="p">():</span>
</span><span id="__span-49-24"><a id="__codelineno-49-24" name="__codelineno-49-24" href="#__codelineno-49-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">winning_sequence</span><span class="p">()</span>
</span><span id="__span-49-25"><a id="__codelineno-49-25" name="__codelineno-49-25" href="#__codelineno-49-25"></a>
</span><span id="__span-49-26"><a id="__codelineno-49-26" name="__codelineno-49-26" href="#__codelineno-49-26"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">solitaire</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></code></pre></div></p>
<p>Finally, if the winning condition is met, it will trigger a winning sequence involving <a href="https://flet.dev/docs/cookbook/animations#position-animation">position animation</a>:
<div class="language-python highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">winning_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>    <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">foundations</span><span class="p">:</span>   
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">slot</span><span class="o">.</span><span class="n">pile</span><span class="p">:</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>            <span class="n">card</span><span class="o">.</span><span class="n">animate_position</span><span class="o">=</span><span class="mi">1000</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>            <span class="n">card</span><span class="o">.</span><span class="n">move_on_top</span><span class="p">()</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a>            <span class="n">card</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">SOLITAIRE_HEIGHT</span><span class="p">)</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a>            <span class="n">card</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">SOLITAIRE_WIDTH</span><span class="p">)</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ft</span><span class="o">.</span><span class="n">AlertDialog</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">ft</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="s2">&quot;Congratulations! You won!&quot;</span><span class="p">),</span> <span class="nb">open</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</span></code></pre></div></p>
<figure>
<p><a class="glightbox" href="../../assets/tutorials/solitaire/winning-the-game.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="winning_the_game" src="../../assets/tutorials/solitaire/winning-the-game.gif" width="80%" /></a></p>
<figcaption></figcaption>
</figure>
<p>Wow! We did it. You can find the full source code for the Solitaire game <a href="https://github.com/flet-dev/examples/tree/main/python/tutorials/solitaire/solitaire-final-part1">here</a>. </p>
<p>Now, as we have a decent desktop version of the game, lets deploy it as a web app to share with your friends and colleagues.</p>
<h2 id="deploying-the-app">Deploying the app<a class="headerlink" href="#deploying-the-app" title="Permanent link">#</a></h2>
<p>Congratulations! You have created your Solitaire game app in Python with Flet, and it looks awesome!</p>
<p>Now it's time to share your app with the world!</p>
<p><a href="/docs/publish/web">Follow these instructions</a> to deploy your Flet app as a web app to Fly.io or Replit.</p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">#</a></h2>
<p>In this tutorial, you have learnt how to:</p>
<ul>
<li><a href="/docs/getting-started/create-flet-app">Create</a> a simple Flet app;</li>
<li>Drag and drop cards with <a href="/docs/controls/gesturedetector">GestureDetector</a>;</li>
<li><a href="/docs/getting-started/custom-controls">Create your own classes</a> that inherit from Flet controls;</li>
<li>Design UI layout using absolute positioning of controls in <a href="/docs/controls/stack">Stack</a>;</li>
<li>Implement <a href="/docs/cookbook/animations">implicit animations</a>;</li>
<li><a href="/docs/publish/web">Deploy</a> your Flet app to the web;</li>
</ul>
<p>For further reading you can explore <a href="/docs/controls">controls</a> and <a href="https://github.com/flet-dev/examples/tree/main/python">examples repository</a>.</p>
<p>We would love to hear your feedback! Please drop us an <a href="mailto:hello@flet.dev">email</a>, join the discussion on <a href="https://discord.gg/dzWXP8SHG8">Discord</a>.</p>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../chat/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Chat">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Chat
              </div>
            </div>
          </a>
        
        
          
          <a href="../todo/" class="md-footer__link md-footer__link--next" aria-label="Next: ToDo">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                ToDo
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Flet
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/flet-dev" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discord.gg/bCFXYgZR3b" target="_blank" rel="noopener" title="discord.gg" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/fletdev" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://bsky.app/profile/fletdev.bsky.social" target="_blank" rel="noopener" title="bsky.app" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2 42.1-31.6 110.3-56 110.3 21.8 0 15.5-8.9 130.5-14.1 149.2-18.2 64.8-84.4 81.4-143.3 71.3C456 322 482.2 380 425.6 438c-107.4 110.2-154.3-27.6-166.3-62.9-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8c-12 35.3-59 173.1-166.3 62.9-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1 10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "content.action.view", "content.action.annotate", "content.action.copy", "content.tooltips", "content.action.tooltips", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.sections", "navigation.footer", "navigation.top", "navigation.indexes", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../assets/_markdown_exec_pyodide.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>